<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/2002/REC-xhtml1-20020801/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>jQuery PHP library</title>
    <meta name="keywords" content="php, ajax, jquery, javascript" />
    <meta name="description" content="jQuery PHP library" />
    <link href="style.css" rel="stylesheet" type="text/css" />
    
    <script src="javascript/jquery.js" type="text/javascript"></script>
    <script src="javascript/jquery.php.js" type="text/javascript"></script>    
    <script src="http://www.json.org/json2.js" type="text/javascript"></script>
    
    <script type="text/javascript" src="http://scripts.hohli.com/brush/shCore.js"></script>
	<script type="text/javascript" src="http://scripts.hohli.com/brush/shBrushJScript.js"></script>
	<script type="text/javascript" src="http://scripts.hohli.com/brush/shBrushXml.js"></script>
	<script type="text/javascript" src="http://scripts.hohli.com/brush/shBrushPhp.js"></script>
	<link type="text/css" rel="stylesheet" href="http://scripts.hohli.com/brush/styles/shCore.css"/>
	<link type="text/css" rel="stylesheet" href="http://scripts.hohli.com/brush/styles/shThemeDefault.css"/>
	<script type="text/javascript">
		SyntaxHighlighter.config.clipboardSwf = 'http://scripts.hohli.com/brush/clipboard.swf';
		SyntaxHighlighter.all();
	</script>
</head>
<body>

<script language="JavaScript" type="text/javascript">
var url = "http://"+document.domain+"/ajax.php";
$(document).ready(function(){
    // example registering simple callback function for messages
    php.messages.myCallBack = function (msg, params){
        alert ("My messages CallBack func: " + msg);
    }
    
    // example registering simple callback function for errors
    php.errors.myCallBack = function (msg, params){
        alert ("My errors CallBack func: " + msg);
    }
    
    // example registering simple callback function for data
    php.data.myCallBack = function (key, value){
        alert ("My data CallBack func: " + key +" = " + value);
    }
    
    formAjax = function () {
        $.php(url, $('form#form2').serialize());
        return false;
    }
    
    getJson = function () {
      var args = Array.prototype.slice.call(arguments);
      $.php(url,{act:'json',data:JSON.stringify(args)});
    }
});
</script>

<!-- start header -->
<div id="header">
	<h1><a href="http://jquery.hohli.com">jQuery PHP</a></h1>
</div>
<!-- end header -->
<!-- start page -->
<div id="page">
	<!-- start content -->
	<div id="content">
		<div class="post">
		    <a name="introduction"></a>
			<h2 class="title">jQuery - AJAX - PHP:</h2>
			<p class="meta"><small>Create JSON response for jQuery</small></p>

			<div class="entry">
			    <h3>Description</h3>
			    <p> jQuery-PHP is a PHP library that allows to tie jQuery with PHP most natural way. You don't need to think in terms of transmission, parsing and other boring staff. Now you have a bridge that brings DOM right onto your server :) and you can ealisy manipulate it in jQuerry-style way.</p>
			    
			    <h3>Zend Framework</h3>
			    <p>It's easy, read article how integrate <a href="/zf.html">jQuery-PHP with Zend Framework</a></p>
			    
                <h3>Initialize</h3>

                PHP: require jQuery library
                <pre class="brush: php;">
                require_once 'libraries/jQuery.php';
                // many actions
                // ...
                
                // get JSON response
                jQuery::getResponse();</pre>
		        HTML: initialize jQuery and jQuery.php
		        
			    <pre class="brush: xml;">
<script src="javascript/jquery.js" type="text/javascript"></script>
<script src="javascript/jquery.php.js" type="text/javascript"></script></pre>

		        JavaScript: call AJAX (example)
                <pre class="brush: js;">
                // do an ajax post request (example)
                jQuery.extend({
                   php: function (url, params) {
                      // do an ajax post request
                      $.ajax({
                          // AJAX-specified URL
                          url: url,
                          // JSON
                          type: "POST",
                          data: params,
                          dataType : "json"
                      })
                   }
                });
                </pre>

			</div>
		</div>
		<div class="post">
		    <a name="requirements"></a>
			<h2 class="title">Requirements:</h2>
			<p class="meta"><small>System requirements</small></p>
			<div class="entry">
                <ul>

                    <li>PHP 5.2.0 or higher (with JSON extension)</li>
                    <li>jQuery 1.1.2 or higher</li>
                </ul>
			</div>
		</div>
		<div class="post">
		    <a name="download"></a>
			<h2 class="title">Download:</h2>

			<p class="meta"><small>Google Code</small></p>
			<div class="entry">
			    Web Access:
			    <div class="source">
			    <a href="http://code.google.com/p/jquery-php/downloads/list" title="Download jQuery-PHP from Google Code">http://code.google.com/p/jquery-php/downloads/list</a>
			    </div>
			    
                SVN Command-Line Access:
                <div class="source">
                svn checkout http://jquery-php.googlecode.com/svn/trunk/ jquery-php-read-only
                </div>

			</div>
		</div>
		<div class="post">
			<h2 class="title">Ads:</h2>
			<p class="meta"><small>Google Ads</small></p>
			<div class="entry">
			    <p align="center">
                <script type="text/javascript"><!--
                google_ad_client = "pub-3214048546347572";
                //728x90, 04.01.08
                google_ad_slot = "0794216339";
                google_ad_width = 728;
                google_ad_height = 90;
                //-->
                </script>
                <script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
                </p>
			</div>
		</div>
		<div class="post">
		    <a name="examples"></a>
			<h2 class="title">Examples:</h2>
			<p class="meta"><small>Should be work...</small></p>

			<div class="entry">
			    <a name="examples-jquery"></a>
			    <h3>jQuery</h3>
			    <div>
			        Assign html by ID (<a href="#" onclick="javascript:$.php(url,{'act':'test0'});return false;">click to run</a>):
<pre class="brush: php;">
jQuery('#test0') -> html('new content');
</pre>

			        This is PHP code equal JavaScript (<a href="#" onclick="javascript:$('#test0').html('new content');return false;">click to run</a>):
<pre class="brush: js;">
// set new content to element with ID test0
$('#test0').html('new content');
</pre>

                    <div class="example" id="test0">old content</div>

			    </div>
			    <br/>
			    <div>
			        Assign html and chage CSS by ID (<a href="#" onclick="javascript:$.php(url,{'act':'test1'});return false;">click to run</a>):
			        
			        <pre class="brush: php;">
jQuery('#test1') -> html('new content')
                 -> css('backgroundColor' , '#ffff00');
</pre>

			        This is PHP code equal JavaScript (<a href="#" onclick="javascript:$('#test1').html('new content').css('backgroundColor' , '#ffff00');return false;">click to run</a>):
<pre class="brush: js;">
// set new content to element with ID test1 and change CSS options
$('#test1').html('new content')
           .css('backgroundColor' , '#ffff00');
</pre>

                    <div class="example" id="test1">old content</div>
			    </div>
			    <br/>
			    <div>

			        Assign html and chage CSS by Path (<a href="#" onclick="javascript:$.php(url,{'act':'test2'});return false;">click to run</a>):
<pre class="brush: php;">
jQuery('#test2 div') -> html('new content');
jQuery('#test2 div.red') -> html('new content')
                         -> css('backgroundColor' , '#ff0000');
</pre>

                    This is PHP code equal JavaScript (<a href="#" onclick="javascript:$('#test2 div').html('new content');$('#test2 div.red').html('new content').css('backgroundColor' , '#ff0000');return false;">click to run</a>):
<pre class="brush: js;">
// set new content to element by Path and change CSS options by another Path
$('#test2 div') .html('new content');
$('#test2 div.red').html('new content')
                   .css('backgroundColor' , '#ff0000');
</pre>

                    <div class="example" id="test2">
                        <div>old content</div>
                        <div class="red">old content</div>
                        <div>old content</div>
                    </div>
			    </div>
			    <br/>

			    <div>
			        Bind event by Path(<a href="#" onclick="javascript:$.php(url,{'act':'test3'});return false;">click to run</a>):
			        <script language="JavaScript" type="text/javascript">
			            function eventAlert(event) {
			                alert('Run "eventAlert": ' + event.data.test);
			            }
			        </script>
<pre class="brush: js;">
// event function
function eventAlert(event) {
    alert('Run "eventAlert": ' + event.data.test);
}
</pre>

<pre class="brush: php;">
jQuery('#test3 div') -> bind('click', array('test'=>'answer'), 'eventAlert')
                     -> css ('cursor', 'pointer')
                     -> css ('color', '#0000ff')
                     -> css ('textDecoration', 'underline');
</pre>

			        
                    This is PHP code equal JavaScript (<a href="#" onclick="javascript:$('#test3 div').bind('click', {'test':'answer'}, eventAlert).css('cursor', 'pointer').css('color',  '#0000ff').css('textDecoration', 'underline');return false;">click to run</a>):
<pre class="brush: js;">
// set event to elements by Path and change CSS options
$('#test3 div').bind('click', {'test':'answer'}, eventAlert)
               .css('cursor', 'pointer')
               .css('color', '#0000ff')
               .css('textDecoration', 'underline');
</pre>

                    <div class="example" id="test3">
                        <div>Element 1</div>
                        <div>Element 2</div>
                        <div>Element 3</div>                    
                    </div>
			    </div>
			    <br/>
			    <div>

			        Use animate (<a href="#" onclick="javascript:$.php(url,{'act':'test4'});return false;">click to run</a>, <a href="#" onclick="javascript:$.php(url,{'act':'test4-restore'});return false;">restore</a>):
<pre class="brush: php;">
jQuery('#test4 div.hide') -> css ('color', '#ff0000')
                          -> animate (array('opacity'=>'show'), 1000);
</pre>

                    This is PHP code equal JavaScript (<a href="#" onclick="javascript:$('#test4 div.hide').css('color',  '#ff0000').animate({'opacity':'show'}, 1000);return false;">click to run</a>):
<pre class="brush: js;">
$('#test4 div.hide').css ('color', '#ff0000')
                    .animate ({'opacity':'show'}, 1000);
</pre>

                    <div class="example" id="test4">
                        <div class="hide" style="display:none">content</div>
                        <div class="show">old content</div>
                        <div class="hide" style="display:none">content</div>  
                    </div>
			    </div>
			    <br/>
			    <div>

			        Use animate with callback (<a href="#" onclick="javascript:$.php(url,{'act':'test5'});return false;">click to run</a>, <a href="#" onclick="javascript:$.php(url,{'act':'test5-restore'});return false;">restore</a>):
			        
			        <script language="JavaScript" type="text/javascript">
			            var eventHideCounter = 0;
			            function eventHide() {
			                alert('Run "eventHide" (count:'+ ++eventHideCounter +')');
			            }
			        </script>
			        
<pre class="brush: js;">
var eventHideCounter = 0;
function eventHide() {
    alert('Run "eventHide" (count:'+ ++eventHideCounter +')');
}
</pre>

<pre class="brush: php;">
jQuery('#test5 div.hide')-> slideUp(500, 'eventHide');
</pre>

                    This is PHP code equal JavaScript (<a href="#" onclick="javascript:$('#test5 div.hide').slideUp(500, eventHide);return false;">click to run</a>):

                    <pre class="brush: js;">
$('#test5 div.hide').slideUp(500, eventHide);
</pre>
                    <div class="example" id="test5">
                        <div class="hide">content</div>
                        <div class="show">old content</div>

                        <div class="hide">content</div>  
                    </div>
			    </div>
			    <br/>
			    <a name="examples-json"></a>
			    <h3>Send a Object as JSON</h3>
			    
			    <div>
			         This is example use <a href="http://www.json.org/json2.js" title="json2.js">json2.js</a> library.<br />
			         Click <a href="#" onclick="getJson('one', 'two', 'three', {four:[0,1,2,3,4]});return false;">here</a> for send a Array to server side:
			         <div class="example" id="testjson"></div>
			         <br />
			        HTML:
                    <pre class="brush: xml;">
                    Click <a href="#" onclick="getJson('one', 'two', 'three', {four:[0,1,2,3,4]});return false;">here</a> ...
                    </pre>
                    
			        JavaScript:
                    <pre class="brush: js;">
                    getJson = function () {
                      // isn't requried
                      var args = Array.prototype.slice.call(arguments);
                      $.php(url,{act:'json',data:JSON.stringify(args)});
                    }
                    </pre>
                    
                    PHP:
                    <pre class="brush: php;">
                    ob_start();
            	    var_dump(json_decode(stripslashes($_REQUEST['data'])));
            	    $data = ob_get_contents();
            	    ob_end_clean();
            	    jQuery('#testjson')->html('<pre>'.$data.'</pre>');
                    </pre>
                    
			    </div>
			    
			    <a name="examples-form"></a>
			    <h3>Send a Form</h3>  
			    <div>
			        Form Example:
			        <form id="form2" action="" onsubmit="formAjax();return false;">

			             <input type="hidden" name="act" value="form"/>
			             <ul>
    			             <li>Field 1: <input type="text" name="field1" maxlength="255"/></li>
    			             <li>Field 2: <input type="text" name="field2" maxlength="255"/></li>
    			             <li>Field 3: <input type="text" name="field3" maxlength="255"/></li>
    			             <li><input type="submit" name="submit" value="submit"/></li>
			             </ul>

			        </form>
			        <br/>
			        Result:			        
                    <div class="example" id="testform"></div>
			        <br/>
			        HTML:
                    <pre class="brush: xml;">
                    <form id="form" action="" onsubmit="formAjax();return false;">
                    <input type="hidden" name="act" value="form"/>
                    Field 1: <input type="text" name="field1" maxlength="255"/>
                    Field 2: <input type="text" name="field2" maxlength="255"/>
                    Field 3: <input type="text" name="field3" maxlength="255"/>
                    <input type="submit" name="submit" value="submit"/>
                    </form>
                    </pre>
                    
                    			        JavaScript:
                    <pre class="brush: js;">
                    formAjax = function () {
                        $.php(url, $('form#form').serialize());
                        return false;
                    }
                    </pre>

                    PHP:
                    <pre class="brush: php;">
                    $field1 = isset($_REQUEST['field1'])?$_REQUEST['field1']:'';
                    $field2 = isset($_REQUEST['field2'])?$_REQUEST['field2']:'';
                    $field3 = isset($_REQUEST['field3'])?$_REQUEST['field3']:'';
                    $response = 'Field 1 = "'.htmlentities(stripslashes($field1)).'"<br/>'.
                    'Field 2 = "'.htmlentities(stripslashes($field2)).'"<br/>'.
                    'Field 3 = "'.htmlentities(stripslashes($field3)).'"<br/>';
                     
                    jQuery('#testform')->html($response);
                     </pre>

			    </div>
			    <br/>
			    <a name="examples-events"></a>
			    <h3>Handle System Events</h3>    
			    <div>
			        Create loading image (like under right menu), <a href="#" onclick="javascript:$.php(url,{'act':'timeout'});return false;">click to run</a>:
<pre class="brush: js;">
// example registering custom beforeSend function
php.beforeSend = function (){
    $('#loading').slideDown('fast');
}
 
// example registering custom complete function
php.complete = function (){
    $('#loading').slideUp('slow');
}
</pre>

			    </div>
			    <br/>
			    <div>
			    
			        Change default error reporting:
<pre class="brush: js;">
// example registering custom error function
php.error = function (){
    alert("Something wrong");
}
// example registering still error function
php.error = function (){
    return true;
}
</pre>
			    </div>
			    <br/>			    
			    <a name="examples-actions"></a>
			    <h3>Additional Actions</h3>    
			    <div>
			        <h4>addMessage():</h4>
			        Return message (<a href="#" onclick="javascript:$.php(url,{'act':'msg'});return false;">click to run</a>):
<pre class="brush: php;">
jQuery::addMessage('Message 1...');
jQuery::addMessage('Message 2...');
</pre>
			        Message handler: you can reset default callback function:
<pre class="brush: js;">
// example registering simple callback function for messages
php.messages.defaultCallBack = function (msg, params){
    alert ("My messages CallBack func: " + msg);
}</pre>

			        Or create own callback function (<a href="#" onclick="javascript:$.php(url,{'act':'msg2'});return false;">click to run</a>):	        
<pre class="brush: js;">
// example registering simple callback function for messages
php.messages.myCallBack = function (msg, params){
    alert ("My messages CallBack func: " + msg);
}</pre>

			        and call it from PHP:
			        <pre class="brush: php;">jQuery::addMessage('Message...', 'myCallBack');</pre>
			    </div>
			    <br/>
			    <div>

			        <h4>addError():</h4>
			        Return error (<a href="#" onclick="javascript:$.php(url,{'act':'err'});return false;">click to run</a>):
<pre class="brush: php;">
jQuery::addError('Error 1...');
jQuery::addError('Error 2...');
</pre>
			        Errors handler equal to messages handler
			    </div>
			    <br/>
			    <div>

			        <h4>addData():</h4>
			        Return data (<a href="#" onclick="javascript:$.php(url,{'act':'data'});return false;">click to run</a>):
<pre class="brush: php;">
jQuery::addData('key1', 'value1');
jQuery::addData('key2', 'value2', 'myCallBack');
</pre>

			    </div>
			    <br/>
			    <div>
			        <h4>evalScript():</h4>
			        Eval script (<a href="#" onclick="javascript:$.php(url,{'act':'eval'});return false;">click to run</a>):
			        <pre class="brush: php;">jQuery::evalScript('alert("Eval script...");');</pre>

			    </div>
			    <br/>		    
			    <a name="examples-callback"></a>
			    <h3>Change Callback functions</h3>
			    <br/>
			    <div>
			        <h4>Show "Loading..." status</h4>
			        
			        Element with id = "loading" - is our "Loading..." image:
<pre class="brush: xml;">
<script type="text/javascript">
$(document).ready(function(){
    php.beforeSend = function() {
        $('#loading').show();
    };
    php.complete   = function(XMLHttpRequest, textStatus) {
        $('#loading').hide();
    };
});
</script></pre>

                </div>
                <div>
			        <h4>Change error callback</h4>
			       
			        Change to alert (O_o):
<pre class="brush: xml;">
<script type="text/javascript">
php.error = function(xmlEr, typeEr, except) {
    alert(xmlEr);
}
</script>
</pre>
			        <br/>
			        
			        Mute mode:
<pre class="brush: xml;">
<script type="text/javascript">
php.error = function(xmlEr, typeEr, except) {}
</script>
</pre>
			    </div>
			</div><!-- end class="entry" -->
		</div><!-- end class="post" -->
	</div>
	<!-- end content -->
</div>
<!-- end page -->


<script type="text/javascript">
	$(document).ready(function(){
		php.beforeSend = function (){
            $('#loading').slideDown('fast');
        }
        
		php.complete = function (){
            $('#loading').slideUp('slow');
        }
        
        php.error = function (){
            return true;
        }
	});
</script>
</body>
</html>